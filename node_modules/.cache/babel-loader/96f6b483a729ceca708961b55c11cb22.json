{"ast":null,"code":"(function () {\n  var ref$, filter, id, map, isEqualToObject, React, createFactory, div, input, span, findDOMNode, ReactCSSTransitionGroup, ReactTether, DivWrapper, OptionWrapper, cancelEvent, classNameFromObject, DropdownMenu;\n  ref$ = require('prelude-ls'), filter = ref$.filter, id = ref$.id, map = ref$.map;\n  isEqualToObject = require('prelude-extension').isEqualToObject;\n  React = require('react'), createFactory = React.createFactory;\n  ref$ = require('react-dom-factories'), div = ref$.div, input = ref$.input, span = ref$.span;\n  findDOMNode = require('react-dom').findDOMNode;\n  ReactCSSTransitionGroup = createFactory(require('react-transition-group/CSSTransitionGroup'));\n  ReactTether = createFactory(require('./ReactTether'));\n  DivWrapper = createFactory(require('./DivWrapper'));\n  OptionWrapper = createFactory(require('./OptionWrapper'));\n  ref$ = require('./utils'), cancelEvent = ref$.cancelEvent, classNameFromObject = ref$.classNameFromObject;\n\n  module.exports = DropdownMenu = function (superclass) {\n    var prototype = extend$((import$(DropdownMenu, superclass).displayName = 'DropdownMenu', DropdownMenu), superclass).prototype,\n        constructor = DropdownMenu;\n    DropdownMenu.defaultProps = {\n      className: \"\",\n      dropdownDirection: 1,\n      groupId: function (it) {\n        return it.groupId;\n      },\n      groupsAsColumns: false,\n      highlightedUid: undefined,\n      onHighlightedUidChange: function (uid, callback) {},\n      onOptionClick: function (uid) {},\n      onScrollLockChange: function (scrollLock) {},\n      options: [],\n      renderNoResultsFound: function () {\n        return div({\n          className: 'no-results-found'\n        }, \"No results found\");\n      },\n      renderGroupTitle: function (index, arg$) {\n        var groupId, title;\n\n        if (arg$ != null) {\n          groupId = arg$.groupId, title = arg$.title;\n        }\n\n        return div({\n          className: 'simple-group-title',\n          key: groupId\n        }, title);\n      },\n      renderOption: function (arg$) {\n        var label, newOption, selectable, isSelectable;\n\n        if (arg$ != null) {\n          label = arg$.label, newOption = arg$.newOption, selectable = arg$.selectable;\n        }\n\n        isSelectable = typeof selectable === 'undefined' || selectable;\n        return div({\n          className: \"simple-option \" + (isSelectable ? '' : 'not-selectable')\n        }, span(null, !!newOption ? \"Add \" + label + \" ...\" : label));\n      },\n      scrollLock: false,\n      style: {},\n      tether: false,\n      tetherProps: {},\n      theme: 'default',\n      transitionEnter: false,\n      transitionLeave: false,\n      transitionEnterTimeout: 200,\n      transitionLeaveTimeout: 200,\n      uid: id\n    };\n\n    DropdownMenu.prototype.render = function () {\n      var dynamicClassName, ref$;\n      dynamicClassName = classNameFromObject((ref$ = {}, ref$[this.props.theme + \"\"] = 1, ref$[this.props.className + \"\"] = 1, ref$.flipped = this.props.dropdownDirection === -1, ref$.tethered = this.props.tether, ref$));\n\n      if (this.props.tether) {\n        return ReactTether((ref$ = import$({}, this.props.tetherProps), ref$.options = {\n          attachment: \"top left\",\n          targetAttachment: \"bottom left\",\n          constraints: [{\n            to: 'scrollParent'\n          }]\n        }, ref$), this.renderAnimatedDropdown({\n          dynamicClassName: dynamicClassName\n        }));\n      } else {\n        return this.renderAnimatedDropdown({\n          dynamicClassName: dynamicClassName\n        });\n      }\n    };\n\n    DropdownMenu.prototype.renderAnimatedDropdown = function (computedState) {\n      var dynamicClassName;\n      dynamicClassName = computedState.dynamicClassName;\n\n      if (!!this.props.transitionEnter || !!this.props.transitionLeave) {\n        return ReactCSSTransitionGroup({\n          ref: 'dropdownMenuWrapper',\n          component: 'div',\n          transitionName: 'custom',\n          transitionEnter: this.props.transitionEnter,\n          transitionLeave: this.props.transitionLeave,\n          transitionEnterTimeout: this.props.transitionEnterTimeout,\n          transitionLeaveTimeout: this.props.transitionLeaveTimeout,\n          className: \"dropdown-menu-wrapper \" + dynamicClassName\n        }, this.renderDropdown(computedState));\n      } else {\n        return this.renderDropdown(computedState);\n      }\n    };\n\n    DropdownMenu.prototype.renderOptions = function (options) {\n      var this$ = this;\n      return map(function (index) {\n        var option, uid;\n        option = options[index];\n        uid = this$.props.uid(option);\n        return OptionWrapper(import$({\n          uid: uid,\n          ref: function (element) {\n            this$[\"option-\" + this$.uidToString(uid)] = element;\n          },\n          key: this$.uidToString(uid),\n          item: option,\n          highlight: isEqualToObject(this$.props.highlightedUid, uid),\n          selectable: option != null ? option.selectable : void 8,\n          onMouseMove: function (arg$) {\n            var currentTarget;\n            currentTarget = arg$.currentTarget;\n\n            if (this$.props.scrollLock) {\n              this$.props.onScrollLockChange(false);\n            }\n          },\n          onMouseOut: function () {\n            if (!this$.props.scrollLock) {\n              this$.props.onHighlightedUidChange(undefined, function () {});\n            }\n          },\n          renderItem: this$.props.renderOption\n        }, function () {\n          switch (false) {\n            case !(typeof (option != null ? option.selectable : void 8) === 'boolean' && !option.selectable):\n              return {\n                onClick: cancelEvent\n              };\n\n            default:\n              return {\n                onClick: function () {\n                  if (!this$.props.scrollLock) {\n                    this$.props.onHighlightedUidChange(uid, function () {});\n                  }\n\n                  this$.props.onOptionClick(this$.props.highlightedUid);\n                },\n                onMouseOver: function (arg$) {\n                  var currentTarget;\n                  currentTarget = arg$.currentTarget;\n\n                  if ('ontouchstart' in window) {\n                    return false;\n                  }\n\n                  if (!this$.props.scrollLock) {\n                    this$.props.onHighlightedUidChange(uid, function () {});\n                  }\n                }\n              };\n          }\n        }()));\n      })(function () {\n        var i$,\n            to$,\n            results$ = [];\n\n        for (i$ = 0, to$ = options.length; i$ < to$; ++i$) {\n          results$.push(i$);\n        }\n\n        return results$;\n      }());\n    };\n\n    DropdownMenu.prototype.renderDropdown = function (arg$) {\n      var dynamicClassName,\n          ref$,\n          ref1$,\n          groups,\n          this$ = this;\n      dynamicClassName = arg$.dynamicClassName;\n\n      if (this.props.open) {\n        return DivWrapper({\n          className: \"dropdown-menu \" + dynamicClassName,\n          ref: function (element) {\n            !!element && (this$.dropdownMenu = element);\n          },\n          onHeightChange: function (height) {\n            if (this$.refs.dropdownMenuWrapper) {\n              findDOMNode(this$.refs.dropdownMenuWrapper).style.height = height + \"px\";\n            }\n          }\n        }, this.props.options.length === 0 ? this.props.renderNoResultsFound() : ((ref$ = this.props) != null ? (ref1$ = ref$.groups) != null ? ref1$.length : void 8 : void 8) > 0 ? (groups = map(function (index) {\n          var group, groupId, options;\n          group = this$.props.groups[index], groupId = group.groupId;\n          options = filter(function (it) {\n            return this$.props.groupId(it) === groupId;\n          })(this$.props.options);\n          return {\n            index: index,\n            group: group,\n            options: options\n          };\n        })(function () {\n          var i$,\n              to$,\n              results$ = [];\n\n          for (i$ = 0, to$ = this.props.groups.length; i$ < to$; ++i$) {\n            results$.push(i$);\n          }\n\n          return results$;\n        }.call(this)), div({\n          className: \"groups \" + (!!this.props.groupsAsColumns ? 'as-columns' : '')\n        }, map(function (arg$) {\n          var index, group, groupId, options;\n          index = arg$.index, group = arg$.group, groupId = group.groupId, options = arg$.options;\n          return div({\n            key: groupId\n          }, this$.props.renderGroupTitle(index, group, options), div({\n            className: 'options'\n          }, this$.renderOptions(options)));\n        })(filter(function (it) {\n          return it.options.length > 0;\n        })(groups)))) : this.renderOptions(this.props.options));\n      } else {\n        return null;\n      }\n    };\n\n    DropdownMenu.prototype.componentDidUpdate = function (prevProps) {\n      var x$, dropdownMenu, ref$;\n\n      if (!deepEq$(prevProps.dropdownDirection, this.props.dropdownDirection, '===') && this.props.open) {\n        x$ = dropdownMenu = findDOMNode((ref$ = this.refs.dropdownMenuWrapper) != null ? ref$ : this.dropdownMenu);\n\n        if (x$ != null) {\n          x$.style.bottom = function () {\n            switch (false) {\n              case this.props.dropdownDirection !== -1:\n                return this.props.bottomAnchor().offsetHeight + dropdownMenu.style.marginBottom + \"px\";\n\n              default:\n                return \"\";\n            }\n          }.call(this);\n        }\n      }\n    };\n\n    DropdownMenu.prototype.highlightAndScrollToOption = function (index, callback) {\n      var uid,\n          this$ = this;\n      callback == null && (callback = function () {});\n      uid = this.props.uid(this.props.options[index]);\n      this.props.onHighlightedUidChange(uid, function () {\n        var ref$, optionElement, parentElement, optionHeight;\n\n        if ((ref$ = findDOMNode(this$ != null ? this$[\"option-\" + this$.uidToString(uid)] : void 8)) != null) {\n          optionElement = ref$;\n        }\n\n        if (!!optionElement) {\n          parentElement = optionElement.parentElement;\n          optionHeight = optionElement.offsetHeight - 1;\n\n          if (optionElement.offsetTop - parentElement.scrollTop >= parentElement.offsetHeight) {\n            parentElement.scrollTop = optionElement.offsetTop - parentElement.offsetHeight + optionHeight;\n          } else if (optionElement.offsetTop - parentElement.scrollTop + optionHeight <= 0) {\n            parentElement.scrollTop = optionElement.offsetTop;\n          }\n        }\n\n        return callback();\n      });\n    };\n\n    DropdownMenu.prototype.highlightAndScrollToSelectableOption = function (index, direction, callback) {\n      var option,\n          ref$,\n          ref1$,\n          this$ = this;\n      callback == null && (callback = function () {});\n\n      if (index < 0 || index >= this.props.options.length) {\n        this.props.onHighlightedUidChange(undefined, function () {\n          return callback(false);\n        });\n      } else {\n        option = (ref$ = this.props) != null ? (ref1$ = ref$.options) != null ? ref1$[index] : void 8 : void 8;\n\n        if (typeof (option != null ? option.selectable : void 8) === 'boolean' && !option.selectable) {\n          this.highlightAndScrollToSelectableOption(index + direction, direction, callback);\n        } else {\n          this.highlightAndScrollToOption(index, function () {\n            return callback(true);\n          });\n        }\n      }\n    };\n\n    DropdownMenu.prototype.uidToString = function (uid) {\n      return (typeof uid === 'object' ? JSON.stringify : id)(uid);\n    };\n\n    function DropdownMenu() {\n      DropdownMenu.superclass.apply(this, arguments);\n    }\n\n    return DropdownMenu;\n  }(React.PureComponent);\n\n  function extend$(sub, sup) {\n    function fun() {}\n\n    fun.prototype = (sub.superclass = sup).prototype;\n    (sub.prototype = new fun()).constructor = sub;\n    if (typeof sup.extended == 'function') sup.extended(sub);\n    return sub;\n  }\n\n  function import$(obj, src) {\n    var own = {}.hasOwnProperty;\n\n    for (var key in src) if (own.call(src, key)) obj[key] = src[key];\n\n    return obj;\n  }\n\n  function deepEq$(x, y, type) {\n    var toString = {}.toString,\n        hasOwnProperty = {}.hasOwnProperty,\n        has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var first = true;\n    return eq(x, y, []);\n\n    function eq(a, b, stack) {\n      var className, length, size, result, alength, blength, r, key, ref, sizeB;\n\n      if (a == null || b == null) {\n        return a === b;\n      }\n\n      if (a.__placeholder__ || b.__placeholder__) {\n        return true;\n      }\n\n      if (a === b) {\n        return a !== 0 || 1 / a == 1 / b;\n      }\n\n      className = toString.call(a);\n\n      if (toString.call(b) != className) {\n        return false;\n      }\n\n      switch (className) {\n        case '[object String]':\n          return a == String(b);\n\n        case '[object Number]':\n          return a != +a ? b != +b : a == 0 ? 1 / a == 1 / b : a == +b;\n\n        case '[object Date]':\n        case '[object Boolean]':\n          return +a == +b;\n\n        case '[object RegExp]':\n          return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase;\n      }\n\n      if (typeof a != 'object' || typeof b != 'object') {\n        return false;\n      }\n\n      length = stack.length;\n\n      while (length--) {\n        if (stack[length] == a) {\n          return true;\n        }\n      }\n\n      stack.push(a);\n      size = 0;\n      result = true;\n\n      if (className == '[object Array]') {\n        alength = a.length;\n        blength = b.length;\n\n        if (first) {\n          switch (type) {\n            case '===':\n              result = alength === blength;\n              break;\n\n            case '<==':\n              result = alength <= blength;\n              break;\n\n            case '<<=':\n              result = alength < blength;\n              break;\n          }\n\n          size = alength;\n          first = false;\n        } else {\n          result = alength === blength;\n          size = alength;\n        }\n\n        if (result) {\n          while (size--) {\n            if (!(result = size in a == size in b && eq(a[size], b[size], stack))) {\n              break;\n            }\n          }\n        }\n      } else {\n        if ('constructor' in a != 'constructor' in b || a.constructor != b.constructor) {\n          return false;\n        }\n\n        for (key in a) {\n          if (has(a, key)) {\n            size++;\n\n            if (!(result = has(b, key) && eq(a[key], b[key], stack))) {\n              break;\n            }\n          }\n        }\n\n        if (result) {\n          sizeB = 0;\n\n          for (key in b) {\n            if (has(b, key)) {\n              ++sizeB;\n            }\n          }\n\n          if (first) {\n            if (type === '<<=') {\n              result = size < sizeB;\n            } else if (type === '<==') {\n              result = size <= sizeB;\n            } else {\n              result = size === sizeB;\n            }\n          } else {\n            first = false;\n            result = size === sizeB;\n          }\n        }\n      }\n\n      stack.pop();\n      return result;\n    }\n  }\n}).call(this);","map":{"version":3,"sources":["/Users/nikitaasauleak/Desktop/search/node_modules/react-selectize/src/DropdownMenu.js"],"names":["ref$","filter","id","map","isEqualToObject","React","createFactory","div","input","span","findDOMNode","ReactCSSTransitionGroup","ReactTether","DivWrapper","OptionWrapper","cancelEvent","classNameFromObject","DropdownMenu","require","module","exports","superclass","prototype","extend$","import$","displayName","constructor","defaultProps","className","dropdownDirection","groupId","it","groupsAsColumns","highlightedUid","undefined","onHighlightedUidChange","uid","callback","onOptionClick","onScrollLockChange","scrollLock","options","renderNoResultsFound","renderGroupTitle","index","arg$","title","key","renderOption","label","newOption","selectable","isSelectable","style","tether","tetherProps","theme","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","render","dynamicClassName","props","flipped","tethered","attachment","targetAttachment","constraints","to","renderAnimatedDropdown","computedState","ref","component","transitionName","renderDropdown","renderOptions","this$","option","element","uidToString","item","highlight","onMouseMove","currentTarget","onMouseOut","renderItem","onClick","onMouseOver","window","i$","to$","results$","length","push","ref1$","groups","open","dropdownMenu","onHeightChange","height","refs","dropdownMenuWrapper","group","call","componentDidUpdate","prevProps","x$","deepEq$","bottom","bottomAnchor","offsetHeight","marginBottom","highlightAndScrollToOption","optionElement","parentElement","optionHeight","offsetTop","scrollTop","highlightAndScrollToSelectableOption","direction","JSON","stringify","apply","arguments","PureComponent","sub","sup","fun","extended","obj","src","own","hasOwnProperty","x","y","type","toString","has","first","eq","a","b","stack","size","result","alength","blength","r","sizeB","__placeholder__","String","source","global","multiline","ignoreCase","pop"],"mappings":"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","sourcesContent":["(function(){\n  var ref$, filter, id, map, isEqualToObject, React, createFactory, div, input, span, findDOMNode, ReactCSSTransitionGroup, ReactTether, DivWrapper, OptionWrapper, cancelEvent, classNameFromObject, DropdownMenu;\n  ref$ = require('prelude-ls'), filter = ref$.filter, id = ref$.id, map = ref$.map;\n  isEqualToObject = require('prelude-extension').isEqualToObject;\n  React = require('react'), createFactory = React.createFactory;\n  ref$ = require('react-dom-factories'), div = ref$.div, input = ref$.input, span = ref$.span;\n  findDOMNode = require('react-dom').findDOMNode;\n  ReactCSSTransitionGroup = createFactory(require('react-transition-group/CSSTransitionGroup'));\n  ReactTether = createFactory(require('./ReactTether'));\n  DivWrapper = createFactory(require('./DivWrapper'));\n  OptionWrapper = createFactory(require('./OptionWrapper'));\n  ref$ = require('./utils'), cancelEvent = ref$.cancelEvent, classNameFromObject = ref$.classNameFromObject;\n  module.exports = DropdownMenu = (function(superclass){\n    var prototype = extend$((import$(DropdownMenu, superclass).displayName = 'DropdownMenu', DropdownMenu), superclass).prototype, constructor = DropdownMenu;\n    DropdownMenu.defaultProps = {\n      className: \"\",\n      dropdownDirection: 1,\n      groupId: function(it){\n        return it.groupId;\n      },\n      groupsAsColumns: false,\n      highlightedUid: undefined,\n      onHighlightedUidChange: function(uid, callback){},\n      onOptionClick: function(uid){},\n      onScrollLockChange: function(scrollLock){},\n      options: [],\n      renderNoResultsFound: function(){\n        return div({\n          className: 'no-results-found'\n        }, \"No results found\");\n      },\n      renderGroupTitle: function(index, arg$){\n        var groupId, title;\n        if (arg$ != null) {\n          groupId = arg$.groupId, title = arg$.title;\n        }\n        return div({\n          className: 'simple-group-title',\n          key: groupId\n        }, title);\n      },\n      renderOption: function(arg$){\n        var label, newOption, selectable, isSelectable;\n        if (arg$ != null) {\n          label = arg$.label, newOption = arg$.newOption, selectable = arg$.selectable;\n        }\n        isSelectable = typeof selectable === 'undefined' || selectable;\n        return div({\n          className: \"simple-option \" + (isSelectable ? '' : 'not-selectable')\n        }, span(null, !!newOption ? \"Add \" + label + \" ...\" : label));\n      },\n      scrollLock: false,\n      style: {},\n      tether: false,\n      tetherProps: {},\n      theme: 'default',\n      transitionEnter: false,\n      transitionLeave: false,\n      transitionEnterTimeout: 200,\n      transitionLeaveTimeout: 200,\n      uid: id\n    };\n    DropdownMenu.prototype.render = function(){\n      var dynamicClassName, ref$;\n      dynamicClassName = classNameFromObject((ref$ = {}, ref$[this.props.theme + \"\"] = 1, ref$[this.props.className + \"\"] = 1, ref$.flipped = this.props.dropdownDirection === -1, ref$.tethered = this.props.tether, ref$));\n      if (this.props.tether) {\n        return ReactTether((ref$ = import$({}, this.props.tetherProps), ref$.options = {\n          attachment: \"top left\",\n          targetAttachment: \"bottom left\",\n          constraints: [{\n            to: 'scrollParent'\n          }]\n        }, ref$), this.renderAnimatedDropdown({\n          dynamicClassName: dynamicClassName\n        }));\n      } else {\n        return this.renderAnimatedDropdown({\n          dynamicClassName: dynamicClassName\n        });\n      }\n    };\n    DropdownMenu.prototype.renderAnimatedDropdown = function(computedState){\n      var dynamicClassName;\n      dynamicClassName = computedState.dynamicClassName;\n      if (!!this.props.transitionEnter || !!this.props.transitionLeave) {\n        return ReactCSSTransitionGroup({\n          ref: 'dropdownMenuWrapper',\n          component: 'div',\n          transitionName: 'custom',\n          transitionEnter: this.props.transitionEnter,\n          transitionLeave: this.props.transitionLeave,\n          transitionEnterTimeout: this.props.transitionEnterTimeout,\n          transitionLeaveTimeout: this.props.transitionLeaveTimeout,\n          className: \"dropdown-menu-wrapper \" + dynamicClassName\n        }, this.renderDropdown(computedState));\n      } else {\n        return this.renderDropdown(computedState);\n      }\n    };\n    DropdownMenu.prototype.renderOptions = function(options){\n      var this$ = this;\n      return map(function(index){\n        var option, uid;\n        option = options[index];\n        uid = this$.props.uid(option);\n        return OptionWrapper(import$({\n          uid: uid,\n          ref: function(element){\n            this$[\"option-\" + this$.uidToString(uid)] = element;\n          },\n          key: this$.uidToString(uid),\n          item: option,\n          highlight: isEqualToObject(this$.props.highlightedUid, uid),\n          selectable: option != null ? option.selectable : void 8,\n          onMouseMove: function(arg$){\n            var currentTarget;\n            currentTarget = arg$.currentTarget;\n            if (this$.props.scrollLock) {\n              this$.props.onScrollLockChange(false);\n            }\n          },\n          onMouseOut: function(){\n            if (!this$.props.scrollLock) {\n              this$.props.onHighlightedUidChange(undefined, function(){});\n            }\n          },\n          renderItem: this$.props.renderOption\n        }, (function(){\n          switch (false) {\n          case !(typeof (option != null ? option.selectable : void 8) === 'boolean' && !option.selectable):\n            return {\n              onClick: cancelEvent\n            };\n          default:\n            return {\n              onClick: function(){\n                if (!this$.props.scrollLock) {\n                  this$.props.onHighlightedUidChange(uid, function(){});\n                }\n                this$.props.onOptionClick(this$.props.highlightedUid);\n              },\n              onMouseOver: function(arg$){\n                var currentTarget;\n                currentTarget = arg$.currentTarget;\n                if ('ontouchstart' in window) {\n                  return false;\n                }\n                if (!this$.props.scrollLock) {\n                  this$.props.onHighlightedUidChange(uid, function(){});\n                }\n              }\n            };\n          }\n        }())));\n      })(\n      (function(){\n        var i$, to$, results$ = [];\n        for (i$ = 0, to$ = options.length; i$ < to$; ++i$) {\n          results$.push(i$);\n        }\n        return results$;\n      }()));\n    };\n    DropdownMenu.prototype.renderDropdown = function(arg$){\n      var dynamicClassName, ref$, ref1$, groups, this$ = this;\n      dynamicClassName = arg$.dynamicClassName;\n      if (this.props.open) {\n        return DivWrapper({\n          className: \"dropdown-menu \" + dynamicClassName,\n          ref: function(element){\n            !!element && (this$.dropdownMenu = element);\n          },\n          onHeightChange: function(height){\n            if (this$.refs.dropdownMenuWrapper) {\n              findDOMNode(this$.refs.dropdownMenuWrapper).style.height = height + \"px\";\n            }\n          }\n        }, this.props.options.length === 0\n          ? this.props.renderNoResultsFound()\n          : ((ref$ = this.props) != null ? (ref1$ = ref$.groups) != null ? ref1$.length : void 8 : void 8) > 0\n            ? (groups = map(function(index){\n              var group, groupId, options;\n              group = this$.props.groups[index], groupId = group.groupId;\n              options = filter(function(it){\n                return this$.props.groupId(it) === groupId;\n              })(\n              this$.props.options);\n              return {\n                index: index,\n                group: group,\n                options: options\n              };\n            })(\n            (function(){\n              var i$, to$, results$ = [];\n              for (i$ = 0, to$ = this.props.groups.length; i$ < to$; ++i$) {\n                results$.push(i$);\n              }\n              return results$;\n            }.call(this))), div({\n              className: \"groups \" + (!!this.props.groupsAsColumns ? 'as-columns' : '')\n            }, map(function(arg$){\n              var index, group, groupId, options;\n              index = arg$.index, group = arg$.group, groupId = group.groupId, options = arg$.options;\n              return div({\n                key: groupId\n              }, this$.props.renderGroupTitle(index, group, options), div({\n                className: 'options'\n              }, this$.renderOptions(options)));\n            })(\n            filter(function(it){\n              return it.options.length > 0;\n            })(\n            groups))))\n            : this.renderOptions(this.props.options));\n      } else {\n        return null;\n      }\n    };\n    DropdownMenu.prototype.componentDidUpdate = function(prevProps){\n      var x$, dropdownMenu, ref$;\n      if (!deepEq$(prevProps.dropdownDirection, this.props.dropdownDirection, '===') && this.props.open) {\n        x$ = dropdownMenu = findDOMNode((ref$ = this.refs.dropdownMenuWrapper) != null\n          ? ref$\n          : this.dropdownMenu);\n        if (x$ != null) {\n          x$.style.bottom = (function(){\n            switch (false) {\n            case this.props.dropdownDirection !== -1:\n              return (this.props.bottomAnchor().offsetHeight + dropdownMenu.style.marginBottom) + \"px\";\n            default:\n              return \"\";\n            }\n          }.call(this));\n        }\n      }\n    };\n    DropdownMenu.prototype.highlightAndScrollToOption = function(index, callback){\n      var uid, this$ = this;\n      callback == null && (callback = function(){});\n      uid = this.props.uid(this.props.options[index]);\n      this.props.onHighlightedUidChange(uid, function(){\n        var ref$, optionElement, parentElement, optionHeight;\n        if ((ref$ = findDOMNode(this$ != null ? this$[\"option-\" + this$.uidToString(uid)] : void 8)) != null) {\n          optionElement = ref$;\n        }\n        if (!!optionElement) {\n          parentElement = optionElement.parentElement;\n          optionHeight = optionElement.offsetHeight - 1;\n          if (optionElement.offsetTop - parentElement.scrollTop >= parentElement.offsetHeight) {\n            parentElement.scrollTop = optionElement.offsetTop - parentElement.offsetHeight + optionHeight;\n          } else if (optionElement.offsetTop - parentElement.scrollTop + optionHeight <= 0) {\n            parentElement.scrollTop = optionElement.offsetTop;\n          }\n        }\n        return callback();\n      });\n    };\n    DropdownMenu.prototype.highlightAndScrollToSelectableOption = function(index, direction, callback){\n      var option, ref$, ref1$, this$ = this;\n      callback == null && (callback = function(){});\n      if (index < 0 || index >= this.props.options.length) {\n        this.props.onHighlightedUidChange(undefined, function(){\n          return callback(false);\n        });\n      } else {\n        option = (ref$ = this.props) != null ? (ref1$ = ref$.options) != null ? ref1$[index] : void 8 : void 8;\n        if (typeof (option != null ? option.selectable : void 8) === 'boolean' && !option.selectable) {\n          this.highlightAndScrollToSelectableOption(index + direction, direction, callback);\n        } else {\n          this.highlightAndScrollToOption(index, function(){\n            return callback(true);\n          });\n        }\n      }\n    };\n    DropdownMenu.prototype.uidToString = function(uid){\n      return (typeof uid === 'object' ? JSON.stringify : id)(uid);\n    };\n    function DropdownMenu(){\n      DropdownMenu.superclass.apply(this, arguments);\n    }\n    return DropdownMenu;\n  }(React.PureComponent));\n  function extend$(sub, sup){\n    function fun(){} fun.prototype = (sub.superclass = sup).prototype;\n    (sub.prototype = new fun).constructor = sub;\n    if (typeof sup.extended == 'function') sup.extended(sub);\n    return sub;\n  }\n  function import$(obj, src){\n    var own = {}.hasOwnProperty;\n    for (var key in src) if (own.call(src, key)) obj[key] = src[key];\n    return obj;\n  }\n  function deepEq$(x, y, type){\n    var toString = {}.toString, hasOwnProperty = {}.hasOwnProperty,\n        has = function (obj, key) { return hasOwnProperty.call(obj, key); };\n    var first = true;\n    return eq(x, y, []);\n    function eq(a, b, stack) {\n      var className, length, size, result, alength, blength, r, key, ref, sizeB;\n      if (a == null || b == null) { return a === b; }\n      if (a.__placeholder__ || b.__placeholder__) { return true; }\n      if (a === b) { return a !== 0 || 1 / a == 1 / b; }\n      className = toString.call(a);\n      if (toString.call(b) != className) { return false; }\n      switch (className) {\n        case '[object String]': return a == String(b);\n        case '[object Number]':\n          return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n        case '[object Date]':\n        case '[object Boolean]':\n          return +a == +b;\n        case '[object RegExp]':\n          return a.source == b.source &&\n                 a.global == b.global &&\n                 a.multiline == b.multiline &&\n                 a.ignoreCase == b.ignoreCase;\n      }\n      if (typeof a != 'object' || typeof b != 'object') { return false; }\n      length = stack.length;\n      while (length--) { if (stack[length] == a) { return true; } }\n      stack.push(a);\n      size = 0;\n      result = true;\n      if (className == '[object Array]') {\n        alength = a.length;\n        blength = b.length;\n        if (first) {\n          switch (type) {\n          case '===': result = alength === blength; break;\n          case '<==': result = alength <= blength; break;\n          case '<<=': result = alength < blength; break;\n          }\n          size = alength;\n          first = false;\n        } else {\n          result = alength === blength;\n          size = alength;\n        }\n        if (result) {\n          while (size--) {\n            if (!(result = size in a == size in b && eq(a[size], b[size], stack))){ break; }\n          }\n        }\n      } else {\n        if ('constructor' in a != 'constructor' in b || a.constructor != b.constructor) {\n          return false;\n        }\n        for (key in a) {\n          if (has(a, key)) {\n            size++;\n            if (!(result = has(b, key) && eq(a[key], b[key], stack))) { break; }\n          }\n        }\n        if (result) {\n          sizeB = 0;\n          for (key in b) {\n            if (has(b, key)) { ++sizeB; }\n          }\n          if (first) {\n            if (type === '<<=') {\n              result = size < sizeB;\n            } else if (type === '<==') {\n              result = size <= sizeB\n            } else {\n              result = size === sizeB;\n            }\n          } else {\n            first = false;\n            result = size === sizeB;\n          }\n        }\n      }\n      stack.pop();\n      return result;\n    }\n  }\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}